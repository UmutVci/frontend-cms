{"ast":null,"code":"import{create}from'zustand';import{login}from'./authService';const useAuth=create(set=>({user:JSON.parse(localStorage.getItem('user'))||null,role:localStorage.getItem('role')||null,token:localStorage.getItem('token')||null,error:null,initialize:()=>{const user=JSON.parse(localStorage.getItem('user'));const role=localStorage.getItem('role');const token=localStorage.getItem('token');set({user,role,token});},setUser:user=>{localStorage.setItem('user',JSON.stringify(user));set({user});},setRole:role=>{localStorage.setItem('role',role);set({role});},setToken:token=>{localStorage.setItem('token',token);set({token});},loginUser:async credentials=>{try{const data=await login(credentials);set({error:null});const user={id:data.id,email:data.email};useAuth.getState().setUser(user);useAuth.getState().setRole(data.role);useAuth.getState().setToken(data.token);return true;}catch(err){var _err$response;set({error:((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||'Login failed'});return false;}},logout:()=>{localStorage.removeItem('user');localStorage.removeItem('role');localStorage.removeItem('token');set({user:null,role:null,token:null});}}));export default useAuth;","map":{"version":3,"names":["create","login","useAuth","set","user","JSON","parse","localStorage","getItem","role","token","error","initialize","setUser","setItem","stringify","setRole","setToken","loginUser","credentials","data","id","email","getState","err","_err$response","response","logout","removeItem"],"sources":["/Users/umutavc/WebstormProjects/cms/src/features/auth/useAuth.js"],"sourcesContent":["import { create } from 'zustand'\nimport { login } from './authService';\n\nconst useAuth = create((set) => ({\n    user: JSON.parse(localStorage.getItem('user')) || null,\n    role: localStorage.getItem('role') || null,\n    token: localStorage.getItem('token') || null,\n    error: null,\n\n    initialize: () => {\n        const user = JSON.parse(localStorage.getItem('user'));\n        const role = localStorage.getItem('role');\n        const token = localStorage.getItem('token');\n\n        set({ user, role, token });\n    },\n\n    setUser: (user) => {\n        localStorage.setItem('user', JSON.stringify(user));\n        set({ user });\n    },\n\n    setRole: (role) => {\n        localStorage.setItem('role', role);\n        set({ role });\n    },\n\n    setToken: (token) => {\n        localStorage.setItem('token', token);\n        set({ token });\n    },\n\n    loginUser: async (credentials) => {\n        try {\n            const data = await login(credentials);\n            set({ error: null });\n\n            const user = { id: data.id, email: data.email };\n            useAuth.getState().setUser(user);\n            useAuth.getState().setRole(data.role);\n            useAuth.getState().setToken(data.token);\n\n            return true;\n        } catch (err) {\n            set({ error: err.response?.data || 'Login failed' });\n            return false;\n        }\n    },\n\n    logout: () => {\n        localStorage.removeItem('user');\n        localStorage.removeItem('role');\n        localStorage.removeItem('token');\n        set({ user: null, role: null, token: null });\n    },\n}));\n\nexport default useAuth;\n"],"mappings":"AAAA,OAASA,MAAM,KAAQ,SAAS,CAChC,OAASC,KAAK,KAAQ,eAAe,CAErC,KAAM,CAAAC,OAAO,CAAGF,MAAM,CAAEG,GAAG,GAAM,CAC7BC,IAAI,CAAEC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,EAAI,IAAI,CACtDC,IAAI,CAAEF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,EAAI,IAAI,CAC1CE,KAAK,CAAEH,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAI,IAAI,CAC5CG,KAAK,CAAE,IAAI,CAEXC,UAAU,CAAEA,CAAA,GAAM,CACd,KAAM,CAAAR,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CACrD,KAAM,CAAAC,IAAI,CAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CACzC,KAAM,CAAAE,KAAK,CAAGH,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3CL,GAAG,CAAC,CAAEC,IAAI,CAAEK,IAAI,CAAEC,KAAM,CAAC,CAAC,CAC9B,CAAC,CAEDG,OAAO,CAAGT,IAAI,EAAK,CACfG,YAAY,CAACO,OAAO,CAAC,MAAM,CAAET,IAAI,CAACU,SAAS,CAACX,IAAI,CAAC,CAAC,CAClDD,GAAG,CAAC,CAAEC,IAAK,CAAC,CAAC,CACjB,CAAC,CAEDY,OAAO,CAAGP,IAAI,EAAK,CACfF,YAAY,CAACO,OAAO,CAAC,MAAM,CAAEL,IAAI,CAAC,CAClCN,GAAG,CAAC,CAAEM,IAAK,CAAC,CAAC,CACjB,CAAC,CAEDQ,QAAQ,CAAGP,KAAK,EAAK,CACjBH,YAAY,CAACO,OAAO,CAAC,OAAO,CAAEJ,KAAK,CAAC,CACpCP,GAAG,CAAC,CAAEO,KAAM,CAAC,CAAC,CAClB,CAAC,CAEDQ,SAAS,CAAE,KAAO,CAAAC,WAAW,EAAK,CAC9B,GAAI,CACA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAnB,KAAK,CAACkB,WAAW,CAAC,CACrChB,GAAG,CAAC,CAAEQ,KAAK,CAAE,IAAK,CAAC,CAAC,CAEpB,KAAM,CAAAP,IAAI,CAAG,CAAEiB,EAAE,CAAED,IAAI,CAACC,EAAE,CAAEC,KAAK,CAAEF,IAAI,CAACE,KAAM,CAAC,CAC/CpB,OAAO,CAACqB,QAAQ,CAAC,CAAC,CAACV,OAAO,CAACT,IAAI,CAAC,CAChCF,OAAO,CAACqB,QAAQ,CAAC,CAAC,CAACP,OAAO,CAACI,IAAI,CAACX,IAAI,CAAC,CACrCP,OAAO,CAACqB,QAAQ,CAAC,CAAC,CAACN,QAAQ,CAACG,IAAI,CAACV,KAAK,CAAC,CAEvC,MAAO,KAAI,CACf,CAAE,MAAOc,GAAG,CAAE,KAAAC,aAAA,CACVtB,GAAG,CAAC,CAAEQ,KAAK,CAAE,EAAAc,aAAA,CAAAD,GAAG,CAACE,QAAQ,UAAAD,aAAA,iBAAZA,aAAA,CAAcL,IAAI,GAAI,cAAe,CAAC,CAAC,CACpD,MAAO,MAAK,CAChB,CACJ,CAAC,CAEDO,MAAM,CAAEA,CAAA,GAAM,CACVpB,YAAY,CAACqB,UAAU,CAAC,MAAM,CAAC,CAC/BrB,YAAY,CAACqB,UAAU,CAAC,MAAM,CAAC,CAC/BrB,YAAY,CAACqB,UAAU,CAAC,OAAO,CAAC,CAChCzB,GAAG,CAAC,CAAEC,IAAI,CAAE,IAAI,CAAEK,IAAI,CAAE,IAAI,CAAEC,KAAK,CAAE,IAAK,CAAC,CAAC,CAChD,CACJ,CAAC,CAAC,CAAC,CAEH,cAAe,CAAAR,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}