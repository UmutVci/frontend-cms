{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import SessionService from\"../../../services/SessionService\";import api from\"../../../lib/axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UpdateSession(){const{id}=useParams();const navigate=useNavigate();const[startTime,setStartTime]=useState(\"\");const[movieId,setMovieId]=useState(\"\");const[hallId,setHallId]=useState(\"\");const[price,setPrice]=useState(\"\");const[moviesList,setMoviesList]=useState([]);const[hallsList,setHallsList]=useState([]);useEffect(()=>{SessionService.getById(id).then(session=>{var _session$movie,_session$hall;setStartTime(session.startTime.slice(0,16));setMovieId(((_session$movie=session.movie)===null||_session$movie===void 0?void 0:_session$movie.id)||session.movie);setHallId(((_session$hall=session.hall)===null||_session$hall===void 0?void 0:_session$hall.id)||session.hall);setPrice(session.price);}).catch(console.error);api.get(\"/movies\").then(r=>{var _r$data$_embedded;const list=((_r$data$_embedded=r.data._embedded)===null||_r$data$_embedded===void 0?void 0:_r$data$_embedded.domainMovieList)||[];setMoviesList(list);}).catch(console.error);api.get(\"/halls\").then(r=>{var _r$data$_embedded2;const list=((_r$data$_embedded2=r.data._embedded)===null||_r$data$_embedded2===void 0?void 0:_r$data$_embedded2.domainHallList)||[];setHallsList(list);}).catch(console.error);},[id]);const handleUpdate=async e=>{e.preventDefault();const payload={id:id,startTime,movie:movieId,hall:hallId,price:price};try{await SessionService.update(id,payload);navigate('/admin/sessions');}catch(err){var _err$response,_err$response$data;console.error('Update error:',err);alert('Güncelleme sırasında hata oldu: '+(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||err.message));}};return/*#__PURE__*/_jsx(\"main\",{className:\"inner-container flex-1 p-10 bg-[#D9D9D9]\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white w-[75%] mx-auto my-4 rounded-xl p-6 overflow-auto\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-6\",onSubmit:handleUpdate,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-semibold\",children:\"Start Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:startTime,onChange:e=>setStartTime(e.target.value),className:\"border-2 border-gray-300 rounded-md w-full p-2\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-semibold\",children:\"Movie\"}),/*#__PURE__*/_jsxs(\"select\",{value:movieId,onChange:e=>setMovieId(e.target.value),className:\"border-2 border-gray-300 rounded-md w-full p-2\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select a Movie --\"}),moviesList.map(m=>/*#__PURE__*/_jsx(\"option\",{value:m.id,children:m.title},m.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-semibold\",children:\"Hall\"}),/*#__PURE__*/_jsxs(\"select\",{value:hallId,onChange:e=>setHallId(e.target.value),className:\"border-2 border-gray-300 rounded-md w-full p-2\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select a Hall --\"}),hallsList.map(h=>/*#__PURE__*/_jsx(\"option\",{value:h.id,children:h.name},h.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-semibold\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:price,onChange:e=>setPrice(e.target.value),className:\"border-2 border-gray-300 rounded-md w-full p-2\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-[#400505] text-white py-2 px-6 rounded-md\",children:\"Update Session\"})]})})});}","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","SessionService","api","jsx","_jsx","jsxs","_jsxs","UpdateSession","id","navigate","startTime","setStartTime","movieId","setMovieId","hallId","setHallId","price","setPrice","moviesList","setMoviesList","hallsList","setHallsList","getById","then","session","_session$movie","_session$hall","slice","movie","hall","catch","console","error","get","r","_r$data$_embedded","list","data","_embedded","domainMovieList","_r$data$_embedded2","domainHallList","handleUpdate","e","preventDefault","payload","update","err","_err$response","_err$response$data","alert","response","message","className","children","onSubmit","type","value","onChange","target","required","map","m","title","h","name","step"],"sources":["/Users/umutavc/WebstormProjects/cms/src/features/admin/AdminSessions/UpdateSession.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport SessionService from \"../../../services/SessionService\";\nimport api from \"../../../lib/axios\";\n\nexport default function UpdateSession() {\n    const { id } = useParams();\n    const navigate = useNavigate();\n\n    const [startTime, setStartTime] = useState(\"\");\n    const [movieId,   setMovieId]   = useState(\"\");\n    const [hallId,    setHallId]    = useState(\"\");\n    const [price,     setPrice]     = useState(\"\");\n\n    const [moviesList, setMoviesList] = useState([]);\n    const [hallsList,  setHallsList]  = useState([]);\n\n    useEffect(() => {\n        SessionService.getById(id)\n            .then(session => {\n                setStartTime(session.startTime.slice(0, 16));\n                setMovieId(session.movie?.id || session.movie);\n                setHallId( session.hall?.id  || session.hall);\n                setPrice(session.price);\n            })\n            .catch(console.error);\n\n        api.get(\"/movies\")\n            .then(r => {\n                const list = r.data._embedded?.domainMovieList || [];\n                setMoviesList(list);\n            })\n            .catch(console.error);\n\n        api.get(\"/halls\")\n            .then(r => {\n                const list = r.data._embedded?.domainHallList || [];\n                setHallsList(list);\n            })\n            .catch(console.error);\n    }, [id]);\n\n    const handleUpdate = async (e) => {\n        e.preventDefault();\n        const payload = {\n            id: id,\n            startTime,\n            movie: movieId,\n            hall:  hallId,\n            price: price\n        };\n\n        try {\n            await SessionService.update(id, payload);\n            navigate('/admin/sessions');\n        } catch (err) {\n            console.error('Update error:', err);\n            alert('Güncelleme sırasında hata oldu: ' + (err.response?.data?.message || err.message));\n        }\n    };\n\n    return (\n                <main className=\"inner-container flex-1 p-10 bg-[#D9D9D9]\">\n                    <div className=\"bg-white w-[75%] mx-auto my-4 rounded-xl p-6 overflow-auto\">\n                        <form className=\"space-y-6\" onSubmit={handleUpdate}>\n                            <div>\n                                <label className=\"block font-semibold\">Start Time</label>\n                                <input\n                                    type=\"datetime-local\"\n                                    value={startTime}\n                                    onChange={(e) => setStartTime(e.target.value)}\n                                    className=\"border-2 border-gray-300 rounded-md w-full p-2\"\n                                    required\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block font-semibold\">Movie</label>\n                                <select\n                                    value={movieId}\n                                    onChange={(e) => setMovieId(e.target.value)}\n                                    className=\"border-2 border-gray-300 rounded-md w-full p-2\"\n                                    required\n                                >\n                                    <option value=\"\">-- Select a Movie --</option>\n                                    {moviesList.map((m) => (\n                                        <option key={m.id} value={m.id}>\n                                            {m.title}\n                                        </option>\n                                    ))}\n                                </select>\n                            </div>\n\n                            <div>\n                                <label className=\"block font-semibold\">Hall</label>\n                                <select\n                                    value={hallId}\n                                    onChange={(e) => setHallId(e.target.value)}\n                                    className=\"border-2 border-gray-300 rounded-md w-full p-2\"\n                                    required\n                                >\n                                    <option value=\"\">-- Select a Hall --</option>\n                                    {hallsList.map((h) => (\n                                        <option key={h.id} value={h.id}>\n                                            {h.name}\n                                        </option>\n                                    ))}\n                                </select>\n                            </div>\n\n                            <div>\n                                <label className=\"block font-semibold\">Price</label>\n                                <input\n                                    type=\"number\"\n                                    step=\"0.01\"\n                                    value={price}\n                                    onChange={(e) => setPrice(e.target.value)}\n                                    className=\"border-2 border-gray-300 rounded-md w-full p-2\"\n                                    required\n                                />\n                            </div>\n\n                            <button\n                                type=\"submit\"\n                                className=\"bg-[#400505] text-white py-2 px-6 rounded-md\"\n                            >\n                                Update Session\n                            </button>\n                        </form>\n                    </div>\n                </main>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}