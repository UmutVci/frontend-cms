{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useLocation,Navigate}from'react-router-dom';import useAuth from'../features/auth/useAuth';import{jsx as _jsx}from\"react/jsx-runtime\";export default function RequireRole(_ref){let{role,children}=_ref;const userRole=useAuth(state=>state.role);const setRole=useAuth(state=>state.setRole);const location=useLocation();const[initialized,setInitialized]=useState(false);useEffect(()=>{const storedRole=localStorage.getItem('role');if(storedRole){setRole(storedRole);}setInitialized(true);},[setRole]);if(!initialized){return/*#__PURE__*/_jsx(\"div\",{className:\"p-6 text-center\",children:\"Y\\xFCkleniyor...\"});}if(userRole!==role){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",state:{from:location},replace:true});}return children;}","map":{"version":3,"names":["React","useEffect","useState","useLocation","Navigate","useAuth","jsx","_jsx","RequireRole","_ref","role","children","userRole","state","setRole","location","initialized","setInitialized","storedRole","localStorage","getItem","className","to","from","replace"],"sources":["/Users/umutavc/WebstormProjects/cms/src/components/RequireRole.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation, Navigate } from 'react-router-dom';\nimport useAuth from '../features/auth/useAuth';\n\nexport default function RequireRole({ role, children }) {\n    const userRole = useAuth(state => state.role);\n    const setRole = useAuth(state => state.setRole);\n    const location = useLocation();\n    const [initialized, setInitialized] = useState(false);\n\n    useEffect(() => {\n        const storedRole = localStorage.getItem('role');\n        if (storedRole) {\n            setRole(storedRole);\n        }\n        setInitialized(true);\n    }, [setRole]);\n\n    if (!initialized) {\n        return <div className=\"p-6 text-center\">YÃ¼kleniyor...</div>;\n    }\n\n    if (userRole !== role) {\n        return <Navigate to=\"/login\" state={{ from: location }} replace />;\n    }\n\n    return children;\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,QAAQ,KAAQ,kBAAkB,CACxD,MAAO,CAAAC,OAAO,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE/C,cAAe,SAAS,CAAAC,WAAWA,CAAAC,IAAA,CAAqB,IAApB,CAAEC,IAAI,CAAEC,QAAS,CAAC,CAAAF,IAAA,CAClD,KAAM,CAAAG,QAAQ,CAAGP,OAAO,CAACQ,KAAK,EAAIA,KAAK,CAACH,IAAI,CAAC,CAC7C,KAAM,CAAAI,OAAO,CAAGT,OAAO,CAACQ,KAAK,EAAIA,KAAK,CAACC,OAAO,CAAC,CAC/C,KAAM,CAAAC,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACa,WAAW,CAAEC,cAAc,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAErDD,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAiB,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC/C,GAAIF,UAAU,CAAE,CACZJ,OAAO,CAACI,UAAU,CAAC,CACvB,CACAD,cAAc,CAAC,IAAI,CAAC,CACxB,CAAC,CAAE,CAACH,OAAO,CAAC,CAAC,CAEb,GAAI,CAACE,WAAW,CAAE,CACd,mBAAOT,IAAA,QAAKc,SAAS,CAAC,iBAAiB,CAAAV,QAAA,CAAC,kBAAa,CAAK,CAAC,CAC/D,CAEA,GAAIC,QAAQ,GAAKF,IAAI,CAAE,CACnB,mBAAOH,IAAA,CAACH,QAAQ,EAACkB,EAAE,CAAC,QAAQ,CAACT,KAAK,CAAE,CAAEU,IAAI,CAAER,QAAS,CAAE,CAACS,OAAO,MAAE,CAAC,CACtE,CAEA,MAAO,CAAAb,QAAQ,CACnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}