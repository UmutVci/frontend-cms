{"ast":null,"code":"import { create } from 'zustand';\nimport { login } from '../services/authService';\nconst useAuth = create(set => ({\n  user: JSON.parse(localStorage.getItem('user')) || null,\n  role: localStorage.getItem('role') || null,\n  token: localStorage.getItem('token') || null,\n  error: null,\n  setUser: user => {\n    localStorage.setItem('user', JSON.stringify(user));\n    set({\n      user\n    });\n  },\n  setRole: role => {\n    localStorage.setItem('role', role);\n    set({\n      role\n    });\n  },\n  setToken: token => {\n    localStorage.setItem('token', token);\n    set({\n      token\n    });\n  },\n  loginUser: async credentials => {\n    try {\n      const data = await login(credentials); // { token, email, role }\n      set({\n        error: null\n      });\n      const user = {\n        name: data.email\n      };\n      useAuth.getState().setUser(user);\n      useAuth.getState().setRole(data.role);\n      useAuth.getState().setToken(data.token);\n      return true;\n    } catch (err) {\n      var _err$response;\n      set({\n        error: ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || 'Login failed'\n      });\n      return false;\n    }\n  },\n  registerUser: async credentials => {\n    try {\n      const data = await register(credentials);\n      set({\n        error: null\n      });\n      const user = {\n        name: data.email\n      };\n      useAuth.getState().setUser(user);\n      useAuth.getState().setRole(data.role);\n      useAuth.getState().setToken(data.token);\n      return true;\n    } catch (err) {\n      var _err$response2;\n      set({\n        error: ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data) || 'Register failed'\n      });\n      return false;\n    }\n  },\n  logout: () => {\n    localStorage.removeItem('user');\n    localStorage.removeItem('role');\n    localStorage.removeItem('token');\n    set({\n      user: null,\n      role: null,\n      token: null\n    });\n  }\n}));\nexport default useAuth;","map":{"version":3,"names":["create","login","useAuth","set","user","JSON","parse","localStorage","getItem","role","token","error","setUser","setItem","stringify","setRole","setToken","loginUser","credentials","data","name","email","getState","err","_err$response","response","registerUser","register","_err$response2","logout","removeItem"],"sources":["/Users/umutavc/WebstormProjects/cms/src/features/auth/store/useAuth.js"],"sourcesContent":["import { create } from 'zustand'\nimport { login } from '../services/authService';\n\nconst useAuth = create((set) => ({\n    user: JSON.parse(localStorage.getItem('user')) || null,\n    role: localStorage.getItem('role') || null,\n    token: localStorage.getItem('token') || null,\n    error: null,\n\n    setUser: (user) => {\n        localStorage.setItem('user', JSON.stringify(user));\n        set({ user });\n    },\n\n    setRole: (role) => {\n        localStorage.setItem('role', role);\n        set({ role });\n    },\n\n    setToken: (token) => {\n        localStorage.setItem('token', token);\n        set({ token });\n    },\n\n    loginUser: async (credentials) => {\n        try {\n            const data = await login(credentials); // { token, email, role }\n            set({ error: null });\n            const user = { name: data.email };\n            useAuth.getState().setUser(user);\n            useAuth.getState().setRole(data.role);\n            useAuth.getState().setToken(data.token);\n            return true;\n        } catch (err) {\n            set({ error: err.response?.data || 'Login failed' });\n            return false;\n        }\n    },\n\n    registerUser: async (credentials) => {\n        try {\n            const data = await register(credentials);\n            set({ error: null });\n            const user = { name: data.email };\n            useAuth.getState().setUser(user);\n            useAuth.getState().setRole(data.role);\n            useAuth.getState().setToken(data.token);\n            return true;\n        } catch (err) {\n            set({ error: err.response?.data || 'Register failed' });\n            return false;\n        }\n    },\n\n    logout: () => {\n        localStorage.removeItem('user');\n        localStorage.removeItem('role');\n        localStorage.removeItem('token');\n        set({ user: null, role: null, token: null });\n    },\n}));\n\nexport default useAuth;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}