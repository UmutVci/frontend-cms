{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import Sidebar from\"../AdminLayout/Sidebar\";import Header from\"../AdminLayout/Header\";import api from\"../../../lib/axios\";// axios.create({ baseURL:\"http://localhost:8080/api\" })\nimport SessionService from\"../../../services/SessionService\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AddSession(){const[startTime,setStartTime]=useState(\"\");const[movieId,setMovieId]=useState(\"\");const[hallId,setHallId]=useState(\"\");const[price,setPrice]=useState(\"\");const[moviesList,setMoviesList]=useState([]);const[hallsList,setHallsList]=useState([]);const navigate=useNavigate();// 1. Mevcut filmleri ve salonları çek\nuseEffect(()=>{api.get(\"/movies\").then(r=>setMoviesList(r.data._embedded.domainMovieList||[])).catch(()=>setMoviesList([]));api.get(\"/halls\").then(r=>setHallsList(r.data._embedded.domainHallList||[])).catch(()=>setHallsList([]));},[]);const handleSubmit=async e=>{e.preventDefault();const payload={startTime,movie:movieId,hall:hallId,price:price};try{await SessionService.create(payload);navigate(\"/admin/sessions\");}catch(error){alert(\"Error while adding a new Session!\");}};return/*#__PURE__*/_jsx(\"main\",{className:\"inner-container flex-1 p-10 bg-[#D9D9D9]\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white w-[75%] mx-auto my-4 rounded-xl p-6\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-6\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-semibold\",children:\"Start Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:startTime,onChange:e=>setStartTime(e.target.value),className:\"border rounded w-full p-2\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-semibold\",children:\"Movie\"}),/*#__PURE__*/_jsxs(\"select\",{value:movieId,onChange:e=>setMovieId(e.target.value),className:\"border rounded w-full p-2\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select a Movie --\"}),moviesList.map(m=>/*#__PURE__*/_jsx(\"option\",{value:m.id,children:m.title},m.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-semibold\",children:\"Hall\"}),/*#__PURE__*/_jsxs(\"select\",{value:hallId,onChange:e=>setHallId(e.target.value),className:\"border rounded w-full p-2\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select a Hall --\"}),hallsList.map(h=>/*#__PURE__*/_jsx(\"option\",{value:h.id,children:h.name},h.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-semibold\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:price,onChange:e=>setPrice(e.target.value),className:\"border rounded w-full p-2\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-[#400505] text-white py-2 px-6 rounded-md\",children:\"Add Session\"})]})})});}","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Sidebar","Header","api","SessionService","jsx","_jsx","jsxs","_jsxs","AddSession","startTime","setStartTime","movieId","setMovieId","hallId","setHallId","price","setPrice","moviesList","setMoviesList","hallsList","setHallsList","navigate","get","then","r","data","_embedded","domainMovieList","catch","domainHallList","handleSubmit","e","preventDefault","payload","movie","hall","create","error","alert","className","children","onSubmit","type","value","onChange","target","required","map","m","id","title","h","name","step"],"sources":["/Users/umutavc/WebstormProjects/cms/src/features/admin/AdminSessions/AddSession.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Sidebar from \"../AdminLayout/Sidebar\";\nimport Header from \"../AdminLayout/Header\";\nimport api from \"../../../lib/axios\";            // axios.create({ baseURL:\"http://localhost:8080/api\" })\nimport SessionService from \"../../../services/SessionService\";\n\nexport default function AddSession() {\n    const [startTime, setStartTime] = useState(\"\");\n    const [movieId, setMovieId]     = useState(\"\");\n    const [hallId, setHallId]       = useState(\"\");\n    const [price, setPrice]         = useState(\"\");\n    const [moviesList, setMoviesList] = useState([]);\n    const [hallsList, setHallsList]   = useState([]);\n\n    const navigate = useNavigate();\n\n    // 1. Mevcut filmleri ve salonları çek\n    useEffect(() => {\n        api.get(\"/movies\")\n            .then(r => setMoviesList(r.data._embedded.domainMovieList || []))\n            .catch(() => setMoviesList([]));\n\n        api.get(\"/halls\")\n            .then(r => setHallsList(r.data._embedded.domainHallList || []))\n            .catch(() => setHallsList([]));\n    }, []);\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        const payload = {\n            startTime,\n            movie: movieId,\n            hall: hallId,\n            price: price,\n        };\n        try {\n            await SessionService.create(payload);\n            navigate(\"/admin/sessions\");\n        } catch (error) {\n            alert(\"Error while adding a new Session!\");\n        }\n    };\n\n    return (\n                <main className=\"inner-container flex-1 p-10 bg-[#D9D9D9]\">\n                    <div className=\"bg-white w-[75%] mx-auto my-4 rounded-xl p-6\">\n                        <form className=\"space-y-6\" onSubmit={handleSubmit}>\n                            <div>\n                                <label className=\"block font-semibold\">Start Time</label>\n                                <input\n                                    type=\"datetime-local\"\n                                    value={startTime}\n                                    onChange={e => setStartTime(e.target.value)}\n                                    className=\"border rounded w-full p-2\"\n                                    required\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block font-semibold\">Movie</label>\n                                <select\n                                    value={movieId}\n                                    onChange={e => setMovieId(e.target.value)}\n                                    className=\"border rounded w-full p-2\"\n                                    required\n                                >\n                                    <option value=\"\">-- Select a Movie --</option>\n                                    {moviesList.map(m => (\n                                        <option key={m.id} value={m.id}>{m.title}</option>\n                                    ))}\n                                </select>\n                            </div>\n\n                            <div>\n                                <label className=\"block font-semibold\">Hall</label>\n                                <select\n                                    value={hallId}\n                                    onChange={e => setHallId(e.target.value)}\n                                    className=\"border rounded w-full p-2\"\n                                    required\n                                >\n                                    <option value=\"\">-- Select a Hall --</option>\n                                    {hallsList.map(h => (\n                                        <option key={h.id} value={h.id}>{h.name}</option>\n                                    ))}\n                                </select>\n                            </div>\n\n                            <div>\n                                <label className=\"block font-semibold\">Price</label>\n                                <input\n                                    type=\"number\"\n                                    step=\"0.01\"\n                                    value={price}\n                                    onChange={e => setPrice(e.target.value)}\n                                    className=\"border rounded w-full p-2\"\n                                    required\n                                />\n                            </div>\n\n                            <button\n                                type=\"submit\"\n                                className=\"bg-[#400505] text-white py-2 px-6 rounded-md\"\n                            >\n                                Add Session\n                            </button>\n                        </form>\n                    </div>\n                </main>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}