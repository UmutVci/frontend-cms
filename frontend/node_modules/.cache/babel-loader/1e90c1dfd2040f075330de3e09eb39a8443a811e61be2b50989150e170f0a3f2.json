{"ast":null,"code":"import Sidebar from\"../AdminLayout/Sidebar\";import Header from\"../AdminLayout/Header\";import React,{useState,useEffect}from\"react\";import{useLocation,useNavigate,useParams}from\"react-router-dom\";import MovieService from\"../../../services/MovieService\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UpdateMovie(){var _location$state;const navigate=useNavigate();const{id}=useParams();const location=useLocation();const movie=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.movie;const[name,setName]=useState(movie.name);const[genre,setGenre]=useState(movie.genre);const[duration,setDuration]=useState(movie.duration);const[img,setImg]=useState(movie.imgUrl);const[price,setPrice]=useState(movie.price);useEffect(()=>{const fetchMovie=async()=>{try{const movie=await MovieService.getById(id);if(movie){setName(movie.title);setGenre(movie.genre);setDuration(movie.duration);setImg(movie.imgUrl||movie.imageUrl);setPrice(movie.price);}else{alert(\"Movie not found.\");navigate(\"/admin/movies\");}}catch(error){console.error(\"Error fetching movie:\",error);}};fetchMovie();},[id,navigate]);const handleInput=async e=>{e.preventDefault();const updatedMovie={id,title:name,genre,duration,imgUrl:img,price:parseFloat(price)||0};console.log(\"Gönderilen veri:\",updatedMovie);console.log(\"Gönderilen veri:\",updatedMovie);console.log(\"Price tipi:\",typeof price,\"Değer:\",price);const success=await MovieService.update(id,updatedMovie);console.log(\"Güncelleme sonucu:\",success);if(success){navigate(\"/admin/movies\");}else{alert(\"Fail\");}};return/*#__PURE__*/_jsx(\"main\",{className:\"inner-container relative flex-1 p-10 bg-[#D9D9D9]\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white w-[75%] h-full mx-3 my-4 rounded-xl p-6 overflow-auto\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"p-8 space-y-4\",onSubmit:handleInput,children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-black font-semibold\",children:\"Movie Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:e=>setName(e.target.value),className:\"border-2 border-gray-300 rounded-md h-8 w-full\",required:true}),/*#__PURE__*/_jsx(\"label\",{className:\"block text-black font-semibold\",children:\"Genre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:genre,onChange:e=>setGenre(e.target.value),className:\"border-2 border-gray-300 rounded-md h-8 w-full\",required:true}),/*#__PURE__*/_jsx(\"label\",{className:\"block text-black font-semibold\",children:\"Duration (min)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:duration,onChange:e=>setDuration(e.target.value),className:\"border-2 border-gray-300 rounded-md h-8 w-full\",required:true}),/*#__PURE__*/_jsx(\"label\",{className:\"block text-black font-semibold\",children:\"Image URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:img,onChange:e=>setImg(e.target.value),className:\"border-2 border-gray-300 rounded-md h-8 w-full\",required:true}),/*#__PURE__*/_jsx(\"label\",{className:\"block text-black font-semibold\",children:\"Price (\\u20BA)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",step:\"0.01\",value:price,onChange:e=>setPrice(e.target.value),className:\"border-2 border-gray-300 rounded-md h-8 w-full\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-[#400505] text-white py-2 px-6 rounded-md\",children:\"Update Movie\"})]})})});}","map":{"version":3,"names":["Sidebar","Header","React","useState","useEffect","useLocation","useNavigate","useParams","MovieService","jsx","_jsx","jsxs","_jsxs","UpdateMovie","_location$state","navigate","id","location","movie","state","name","setName","genre","setGenre","duration","setDuration","img","setImg","imgUrl","price","setPrice","fetchMovie","getById","title","imageUrl","alert","error","console","handleInput","e","preventDefault","updatedMovie","parseFloat","log","success","update","className","children","onSubmit","type","value","onChange","target","required","min","step"],"sources":["/Users/umutavc/WebstormProjects/cms/src/features/admin/AdminMovies/UpdateMovie.jsx"],"sourcesContent":["import Sidebar from \"../AdminLayout/Sidebar\";\nimport Header from \"../AdminLayout/Header\";\nimport React, { useState, useEffect } from \"react\";\nimport {useLocation, useNavigate, useParams} from \"react-router-dom\";\nimport MovieService from \"../../../services/MovieService\";\n\nexport default function UpdateMovie() {\n    const navigate = useNavigate();\n    const { id } = useParams();\n\n    const location = useLocation();\n    const movie = location.state?.movie;\n\n    const [name, setName] = useState(movie.name);\n    const [genre, setGenre] = useState(movie.genre);\n    const [duration, setDuration] = useState(movie.duration);\n    const [img, setImg] = useState(movie.imgUrl);\n    const [price, setPrice] = useState(movie.price);\n\n    useEffect(() => {\n        const fetchMovie = async () => {\n            try {\n                const movie = await MovieService.getById(id);\n                if (movie) {\n                    setName(movie.title);\n                    setGenre(movie.genre);\n                    setDuration(movie.duration);\n                    setImg(movie.imgUrl || movie.imageUrl);\n                    setPrice(movie.price);\n                } else {\n                    alert(\"Movie not found.\");\n                    navigate(\"/admin/movies\");\n                }\n            } catch (error) {\n                console.error(\"Error fetching movie:\", error);\n            }\n        };\n        fetchMovie();\n    }, [id, navigate]);\n\n    const handleInput = async (e) => {\n        e.preventDefault();\n        const updatedMovie = {\n            id, title: name, genre, duration, imgUrl: img, price: parseFloat(price) || 0\n        };\n        console.log(\"Gönderilen veri:\", updatedMovie);\n        console.log(\"Gönderilen veri:\", updatedMovie);\n        console.log(\"Price tipi:\", typeof price, \"Değer:\", price);\n        const success = await MovieService.update(id, updatedMovie);\n        console.log(\"Güncelleme sonucu:\", success);\n        if (success) {\n            navigate(\"/admin/movies\");\n        }\n        else {\n            alert(\"Fail\")\n        }\n    };\n\n    return (\n                <main className=\"inner-container relative flex-1 p-10 bg-[#D9D9D9]\">\n                    <div className=\"bg-white w-[75%] h-full mx-3 my-4 rounded-xl p-6 overflow-auto\">\n                        <form className=\"p-8 space-y-4\" onSubmit={handleInput}>\n                            <label className=\"block text-black font-semibold\">Movie Name</label>\n                            <input\n                                type=\"text\"\n                                value={name}\n                                onChange={(e) => setName(e.target.value)}\n                                className=\"border-2 border-gray-300 rounded-md h-8 w-full\"\n                                required\n                            />\n                            <label className=\"block text-black font-semibold\">Genre</label>\n                            <input\n                                type=\"text\"\n                                value={genre}\n                                onChange={(e) => setGenre(e.target.value)}\n                                className=\"border-2 border-gray-300 rounded-md h-8 w-full\"\n                                required\n                            />\n                            <label className=\"block text-black font-semibold\">Duration (min)</label>\n                            <input\n                                type=\"text\"\n                                value={duration}\n                                onChange={(e) => setDuration(e.target.value)}\n                                className=\"border-2 border-gray-300 rounded-md h-8 w-full\"\n                                required\n                            />\n                            <label className=\"block text-black font-semibold\">Image URL</label>\n                            <input\n                                type=\"text\"\n                                value={img}\n                                onChange={(e) => setImg(e.target.value)}\n                                className=\"border-2 border-gray-300 rounded-md h-8 w-full\"\n                                required\n                            />\n                            <label className=\"block text-black font-semibold\">Price (₺)</label>\n                            <input\n                                type=\"number\"\n                                min=\"0\"\n                                step=\"0.01\"\n                                value={price}\n                                onChange={(e) => setPrice(e.target.value)}\n                                className=\"border-2 border-gray-300 rounded-md h-8 w-full\"\n                                required\n                            />\n                            <button\n                                type=\"submit\"\n                                className=\"bg-[#400505] text-white py-2 px-6 rounded-md\"\n                            >\n                                Update Movie\n                            </button>\n                        </form>\n                    </div>\n                </main>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}