{"ast":null,"code":"import { create } from 'zustand';\nimport { login } from './authService';\nconst useAuth = create(set => ({\n  user: JSON.parse(localStorage.getItem('user')) || null,\n  role: localStorage.getItem('role') || null,\n  token: localStorage.getItem('token') || null,\n  error: null,\n  initialize: () => {\n    const user = JSON.parse(localStorage.getItem('user'));\n    const role = localStorage.getItem('role');\n    const token = localStorage.getItem('token');\n    set({\n      user,\n      role,\n      token\n    });\n  },\n  setUser: user => {\n    localStorage.setItem('user', JSON.stringify(user));\n    set({\n      user\n    });\n  },\n  setRole: role => {\n    localStorage.setItem('role', role);\n    set({\n      role\n    });\n  },\n  setToken: token => {\n    localStorage.setItem('token', token);\n    set({\n      token\n    });\n  },\n  loginUser: async credentials => {\n    try {\n      const data = await login(credentials);\n      set({\n        error: null\n      });\n      const user = {\n        id: data.id,\n        email: data.email\n      };\n      useAuth.getState().setUser(user);\n      useAuth.getState().setRole(data.role);\n      useAuth.getState().setToken(data.token);\n      return true;\n    } catch (err) {\n      var _err$response;\n      set({\n        error: ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || 'Login failed'\n      });\n      return false;\n    }\n  },\n  logout: () => {\n    localStorage.removeItem('user');\n    localStorage.removeItem('role');\n    localStorage.removeItem('token');\n    set({\n      user: null,\n      role: null,\n      token: null\n    });\n  }\n}));\nexport default useAuth;","map":{"version":3,"names":["create","login","useAuth","set","user","JSON","parse","localStorage","getItem","role","token","error","initialize","setUser","setItem","stringify","setRole","setToken","loginUser","credentials","data","id","email","getState","err","_err$response","response","logout","removeItem"],"sources":["/Users/umutavc/WebstormProjects/cms/src/features/auth/useAuth.js"],"sourcesContent":["import { create } from 'zustand'\nimport { login } from './authService';\n\nconst useAuth = create((set) => ({\n    user: JSON.parse(localStorage.getItem('user')) || null,\n    role: localStorage.getItem('role') || null,\n    token: localStorage.getItem('token') || null,\n    error: null,\n\n    initialize: () => {\n        const user = JSON.parse(localStorage.getItem('user'));\n        const role = localStorage.getItem('role');\n        const token = localStorage.getItem('token');\n\n        set({ user, role, token });\n    },\n\n    setUser: (user) => {\n        localStorage.setItem('user', JSON.stringify(user));\n        set({ user });\n    },\n\n    setRole: (role) => {\n        localStorage.setItem('role', role);\n        set({ role });\n    },\n\n    setToken: (token) => {\n        localStorage.setItem('token', token);\n        set({ token });\n    },\n\n    loginUser: async (credentials) => {\n        try {\n            const data = await login(credentials);\n            set({ error: null });\n\n            const user = { id: data.id, email: data.email };\n            useAuth.getState().setUser(user);\n            useAuth.getState().setRole(data.role);\n            useAuth.getState().setToken(data.token);\n\n            return true;\n        } catch (err) {\n            set({ error: err.response?.data || 'Login failed' });\n            return false;\n        }\n    },\n\n    logout: () => {\n        localStorage.removeItem('user');\n        localStorage.removeItem('role');\n        localStorage.removeItem('token');\n        set({ user: null, role: null, token: null });\n    },\n}));\n\nexport default useAuth;\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,SAAS;AAChC,SAASC,KAAK,QAAQ,eAAe;AAErC,MAAMC,OAAO,GAAGF,MAAM,CAAEG,GAAG,KAAM;EAC7BC,IAAI,EAAEC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,IAAI;EACtDC,IAAI,EAAEF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI;EAC1CE,KAAK,EAAEH,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI;EAC5CG,KAAK,EAAE,IAAI;EAEXC,UAAU,EAAEA,CAAA,KAAM;IACd,MAAMR,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;IACrD,MAAMC,IAAI,GAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IACzC,MAAME,KAAK,GAAGH,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAE3CL,GAAG,CAAC;MAAEC,IAAI;MAAEK,IAAI;MAAEC;IAAM,CAAC,CAAC;EAC9B,CAAC;EAEDG,OAAO,EAAGT,IAAI,IAAK;IACfG,YAAY,CAACO,OAAO,CAAC,MAAM,EAAET,IAAI,CAACU,SAAS,CAACX,IAAI,CAAC,CAAC;IAClDD,GAAG,CAAC;MAAEC;IAAK,CAAC,CAAC;EACjB,CAAC;EAEDY,OAAO,EAAGP,IAAI,IAAK;IACfF,YAAY,CAACO,OAAO,CAAC,MAAM,EAAEL,IAAI,CAAC;IAClCN,GAAG,CAAC;MAAEM;IAAK,CAAC,CAAC;EACjB,CAAC;EAEDQ,QAAQ,EAAGP,KAAK,IAAK;IACjBH,YAAY,CAACO,OAAO,CAAC,OAAO,EAAEJ,KAAK,CAAC;IACpCP,GAAG,CAAC;MAAEO;IAAM,CAAC,CAAC;EAClB,CAAC;EAEDQ,SAAS,EAAE,MAAOC,WAAW,IAAK;IAC9B,IAAI;MACA,MAAMC,IAAI,GAAG,MAAMnB,KAAK,CAACkB,WAAW,CAAC;MACrChB,GAAG,CAAC;QAAEQ,KAAK,EAAE;MAAK,CAAC,CAAC;MAEpB,MAAMP,IAAI,GAAG;QAAEiB,EAAE,EAAED,IAAI,CAACC,EAAE;QAAEC,KAAK,EAAEF,IAAI,CAACE;MAAM,CAAC;MAC/CpB,OAAO,CAACqB,QAAQ,CAAC,CAAC,CAACV,OAAO,CAACT,IAAI,CAAC;MAChCF,OAAO,CAACqB,QAAQ,CAAC,CAAC,CAACP,OAAO,CAACI,IAAI,CAACX,IAAI,CAAC;MACrCP,OAAO,CAACqB,QAAQ,CAAC,CAAC,CAACN,QAAQ,CAACG,IAAI,CAACV,KAAK,CAAC;MAEvC,OAAO,IAAI;IACf,CAAC,CAAC,OAAOc,GAAG,EAAE;MAAA,IAAAC,aAAA;MACVtB,GAAG,CAAC;QAAEQ,KAAK,EAAE,EAAAc,aAAA,GAAAD,GAAG,CAACE,QAAQ,cAAAD,aAAA,uBAAZA,aAAA,CAAcL,IAAI,KAAI;MAAe,CAAC,CAAC;MACpD,OAAO,KAAK;IAChB;EACJ,CAAC;EAEDO,MAAM,EAAEA,CAAA,KAAM;IACVpB,YAAY,CAACqB,UAAU,CAAC,MAAM,CAAC;IAC/BrB,YAAY,CAACqB,UAAU,CAAC,MAAM,CAAC;IAC/BrB,YAAY,CAACqB,UAAU,CAAC,OAAO,CAAC;IAChCzB,GAAG,CAAC;MAAEC,IAAI,EAAE,IAAI;MAAEK,IAAI,EAAE,IAAI;MAAEC,KAAK,EAAE;IAAK,CAAC,CAAC;EAChD;AACJ,CAAC,CAAC,CAAC;AAEH,eAAeR,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}