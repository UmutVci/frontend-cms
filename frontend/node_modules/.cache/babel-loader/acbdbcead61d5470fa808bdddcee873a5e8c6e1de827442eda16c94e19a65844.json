{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useLocation,useNavigate,useSearchParams}from'react-router-dom';import SessionService from'../../services/SessionService';import HallService from'../../services/HallService';import MovieService from'../../services/MovieService';// ‚úÖ Movie servisini ekledik\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ReservationSuccessPage(){const navigate=useNavigate();const location=useLocation();const[searchParams]=useSearchParams();const[session,setSession]=useState(null);const[hall,setHall]=useState(null);const[seats,setSeats]=useState([]);const[movie,setMovie]=useState(null);// ‚úÖ Film bilgisi i√ßin state\nuseEffect(()=>{var _searchParams$get,_searchParams$get$spl;const sessionId=searchParams.get('sessionId');const hallId=searchParams.get('hallId');const seatIds=((_searchParams$get=searchParams.get('seatIds'))===null||_searchParams$get===void 0?void 0:(_searchParams$get$spl=_searchParams$get.split(','))===null||_searchParams$get$spl===void 0?void 0:_searchParams$get$spl.map(id=>Number(id)))||[];async function loadData(){try{const sessionData=await SessionService.getById(sessionId);const hallData=await HallService.getById(hallId);const allSeats=await SessionService.getSeatsBySessionId(sessionId);const reservedSeats=allSeats.filter(seat=>seatIds.includes(seat.id));// üé¨ Film bilgisini √ßek\nif(sessionData.movie){const movieData=await MovieService.getById(sessionData.movie);setMovie(movieData);}setSession(sessionData);setHall(hallData);setSeats(reservedSeats);}catch(err){console.error(\"‚ùå Error loading reservation data\",err);}}loadData();},[searchParams]);if(!session||!hall||seats.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"p-6 text-red-600\",children:\"\\u274C Error!\"});}const seatLabels=seats.map(seat=>\"\".concat(seat.seatRow).concat(seat.seatColumn)).join(', ');return/*#__PURE__*/_jsx(\"main\",{className:\"inner-container relative flex-1 p-10 bg-[#D9D9D9]\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white w-[75%] h-full mx-auto my-4 rounded-xl p-6 overflow-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4 text-green-700\",children:\"\\uD83C\\uDF89 Reservation Successfully!\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[\" \",/*#__PURE__*/_jsx(\"strong\",{children:(movie===null||movie===void 0?void 0:movie.title)||'Film'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[\"Date: \",new Date(session.startTime).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[\"Time: \",new Date(session.startTime).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-4\",children:[\"Seats: \",seatLabels]}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold\",children:[\"\\uD83C\\uDFDB\\uFE0F Hall: \",hall.name]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/clerk/movies'),className:\"mt-6 bg-[#400505] text-white px-6 py-2 rounded\",children:\"Back to the Homepage\"})]})});}","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","useSearchParams","SessionService","HallService","MovieService","jsx","_jsx","jsxs","_jsxs","ReservationSuccessPage","navigate","location","searchParams","session","setSession","hall","setHall","seats","setSeats","movie","setMovie","_searchParams$get","_searchParams$get$spl","sessionId","get","hallId","seatIds","split","map","id","Number","loadData","sessionData","getById","hallData","allSeats","getSeatsBySessionId","reservedSeats","filter","seat","includes","movieData","err","console","error","length","className","children","seatLabels","concat","seatRow","seatColumn","join","title","Date","startTime","toLocaleDateString","toLocaleTimeString","hour","minute","name","onClick"],"sources":["/Users/umutavc/WebstormProjects/cms/src/features/clerk/ReservationSuccessPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate, useSearchParams } from 'react-router-dom';\nimport SessionService from '../../services/SessionService';\nimport HallService from '../../services/HallService';\nimport MovieService from '../../services/MovieService'; // ‚úÖ Movie servisini ekledik\n\nexport default function ReservationSuccessPage() {\n    const navigate = useNavigate();\n    const location = useLocation();\n    const [searchParams] = useSearchParams();\n\n    const [session, setSession] = useState(null);\n    const [hall, setHall] = useState(null);\n    const [seats, setSeats] = useState([]);\n    const [movie, setMovie] = useState(null); // ‚úÖ Film bilgisi i√ßin state\n\n    useEffect(() => {\n        const sessionId = searchParams.get('sessionId');\n        const hallId = searchParams.get('hallId');\n        const seatIds = searchParams.get('seatIds')?.split(',')?.map(id => Number(id)) || [];\n\n        async function loadData() {\n            try {\n                const sessionData = await SessionService.getById(sessionId);\n                const hallData = await HallService.getById(hallId);\n                const allSeats = await SessionService.getSeatsBySessionId(sessionId);\n                const reservedSeats = allSeats.filter(seat => seatIds.includes(seat.id));\n\n                // üé¨ Film bilgisini √ßek\n                if (sessionData.movie) {\n                    const movieData = await MovieService.getById(sessionData.movie);\n                    setMovie(movieData);\n                }\n\n                setSession(sessionData);\n                setHall(hallData);\n                setSeats(reservedSeats);\n            } catch (err) {\n                console.error(\"‚ùå Error loading reservation data\", err);\n            }\n        }\n\n        loadData();\n    }, [searchParams]);\n\n    if (!session || !hall || seats.length === 0) {\n        return <div className=\"p-6 text-red-600\">‚ùå Error!</div>;\n    }\n\n    const seatLabels = seats.map(seat => `${seat.seatRow}${seat.seatColumn}`).join(', ');\n\n    return (\n        <main className=\"inner-container relative flex-1 p-10 bg-[#D9D9D9]\">\n            <div className=\"bg-white w-[75%] h-full mx-auto my-4 rounded-xl p-6 overflow-auto\">\n            <h2 className=\"text-2xl font-bold mb-4 text-green-700\">üéâ Reservation Successfully!</h2>\n            <p className=\"mb-2\"> <strong>{movie?.title || 'Film'}</strong></p>\n            <p className=\"mb-2\">Date: {new Date(session.startTime).toLocaleDateString()}</p>\n            <p className=\"mb-2\">Time: {new Date(session.startTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</p>\n            <p className=\"mb-4\">Seats: {seatLabels}</p>\n            <p className=\"font-semibold\">üèõÔ∏è Hall: {hall.name}</p>\n\n            <button\n                onClick={() => navigate('/clerk/movies')}\n                className=\"mt-6 bg-[#400505] text-white px-6 py-2 rounded\"\n            >\n                Back to the Homepage\n            </button>\n        </div>\n        </main>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}