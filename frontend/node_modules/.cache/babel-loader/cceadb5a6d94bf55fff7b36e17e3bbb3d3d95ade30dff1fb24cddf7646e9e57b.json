{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import ClerkMoviesService from\"../../../services/MovieService\";import ClerkSessionsService from\"../../../services/SessionService\";import HallService from\"../../../services/HallService\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MovieSessions(){const{id}=useParams();// movieId\nconst navigate=useNavigate();const[movie,setMovie]=useState(null);const[sessions,setSessions]=useState([]);const[hallsMap,setHallsMap]=useState({});const[loading,setLoading]=useState(true);useEffect(()=>{setLoading(true);Promise.all([ClerkMoviesService.getById(id),ClerkSessionsService.getAllSessionsFromMovie(id),HallService.getAll()]).then(_ref=>{let[movieData,sessionsData,hallsData]=_ref;setMovie(movieData);setSessions(sessionsData);// salonları id'ye göre eşleştir\nconst map={};hallsData.forEach(h=>{map[h.id]=h.type;// istersen h.name de olabilir\n});setHallsMap(map);}).catch(err=>{console.error(\"Veriler yüklenemedi:\",err);}).finally(()=>setLoading(false));},[id]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"p-6 text-center\",children:\"Loading...\"});if(!movie)return/*#__PURE__*/_jsx(\"div\",{className:\"p-6 text-center text-red-600\",children:\"Movie not found.\"});return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-[80vh] flex items-center justify-center px-6 py-12 gap-10 bg-[#f5f6f8]\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl flex gap-12 p-12 min-w-[1000px] max-w-5xl w-full justify-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#400505] rounded-2xl py-8 px-8 min-w-[500px] flex flex-col items-center justify-center shadow-lg\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-white mb-8 text-center\",children:[movie.title,\" Sessions\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-8 min-w-[350px]\",children:[sessions.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"col-span-2 text-center text-gray-300 text-lg py-8\",children:\"No sessions found.\"}),sessions.map(s=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-black text-white px-4 py-1 rounded-t-lg mb-0 -mb-2 text-xs font-bold\",children:hallsMap[s.hall]||\"Unknown Hall\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/clerk/sessions/\".concat(s.id,\"/seats\")),className:\"bg-gray-200 rounded-lg text-black text-xl font-semibold px-8 py-4 min-w-[120px] text-center shadow border border-gray-100 hover:bg-gray-300 transition\",children:new Date(s.startTime).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})})]},s.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center bg-gray-100 rounded-2xl py-8 px-8 min-w-[330px] max-w-xs shadow\",children:[/*#__PURE__*/_jsx(\"img\",{src:movie.imgUrl,alt:movie.title,className:\"rounded-lg mb-6 max-h-80 object-contain\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-center mb-2 text-lg\",children:[movie.duration,\" min / \",movie.genre]}),/*#__PURE__*/_jsx(\"div\",{className:\"font-extrabold text-2xl text-black text-center\",children:movie.format||\"2D\"})]})]})});}","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","ClerkMoviesService","ClerkSessionsService","HallService","jsx","_jsx","jsxs","_jsxs","MovieSessions","id","navigate","movie","setMovie","sessions","setSessions","hallsMap","setHallsMap","loading","setLoading","Promise","all","getById","getAllSessionsFromMovie","getAll","then","_ref","movieData","sessionsData","hallsData","map","forEach","h","type","catch","err","console","error","finally","className","children","title","length","s","hall","onClick","concat","Date","startTime","toLocaleTimeString","hour","minute","src","imgUrl","alt","duration","genre","format"],"sources":["/Users/umutavc/WebstormProjects/cms/src/features/clerk/ClerkMovies/MovieSessions.jsx"],"sourcesContent":["\nimport React, { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport ClerkMoviesService from \"../../../services/MovieService\";\nimport ClerkSessionsService from \"../../../services/SessionService\";\nimport HallService from \"../../../services/HallService\";\n\nexport default function MovieSessions() {\n    const { id } = useParams(); // movieId\n    const navigate = useNavigate();\n\n    const [movie, setMovie] = useState(null);\n    const [sessions, setSessions] = useState([]);\n    const [hallsMap, setHallsMap] = useState({});\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        setLoading(true);\n        Promise.all([\n            ClerkMoviesService.getById(id),\n            ClerkSessionsService.getAllSessionsFromMovie(id),\n            HallService.getAll()\n        ])\n            .then(([movieData, sessionsData, hallsData]) => {\n                setMovie(movieData);\n                setSessions(sessionsData);\n\n                // salonları id'ye göre eşleştir\n                const map = {};\n                hallsData.forEach(h => {\n                    map[h.id] = h.type; // istersen h.name de olabilir\n                });\n                setHallsMap(map);\n            })\n            .catch(err => {\n                console.error(\"Veriler yüklenemedi:\", err);\n            })\n            .finally(() => setLoading(false));\n    }, [id]);\n\n    if (loading) return <div className=\"p-6 text-center\">Loading...</div>;\n    if (!movie) return <div className=\"p-6 text-center text-red-600\">Movie not found.</div>;\n\n    return (\n        <div className=\"min-h-[80vh] flex items-center justify-center px-6 py-12 gap-10 bg-[#f5f6f8]\">\n            <div className=\"bg-white rounded-2xl shadow-xl flex gap-12 p-12 min-w-[1000px] max-w-5xl w-full justify-center\">\n                {/* Sol taraf: Seanslar */}\n                <div className=\"bg-[#400505] rounded-2xl py-8 px-8 min-w-[500px] flex flex-col items-center justify-center shadow-lg\">\n                    <h2 className=\"text-2xl font-bold text-white mb-8 text-center\">\n                        {movie.title} Sessions\n                    </h2>\n                    <div className=\"grid grid-cols-2 gap-8 min-w-[350px]\">\n                        {sessions.length === 0 && (\n                            <div className=\"col-span-2 text-center text-gray-300 text-lg py-8\">\n                                No sessions found.\n                            </div>\n                        )}\n                        {sessions.map((s) => (\n                            <div className=\"flex flex-col items-start\" key={s.id}>\n                                <div className=\"bg-black text-white px-4 py-1 rounded-t-lg mb-0 -mb-2 text-xs font-bold\">\n                                    {hallsMap[s.hall] || \"Unknown Hall\"}\n                                </div>\n                                <button\n                                    onClick={() => navigate(`/clerk/sessions/${s.id}/seats`)}\n                                    className=\"bg-gray-200 rounded-lg text-black text-xl font-semibold px-8 py-4 min-w-[120px] text-center shadow border border-gray-100 hover:bg-gray-300 transition\"\n                                >\n                                    {new Date(s.startTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                                </button>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n\n                {/* Sağ taraf: Film bilgisi */}\n                <div className=\"flex flex-col items-center bg-gray-100 rounded-2xl py-8 px-8 min-w-[330px] max-w-xs shadow\">\n                    <img\n                        src={movie.imgUrl}\n                        alt={movie.title}\n                        className=\"rounded-lg mb-6 max-h-80 object-contain\"\n                    />\n                    <div className=\"font-semibold text-center mb-2 text-lg\">\n                        {movie.duration} min / {movie.genre}\n                    </div>\n                    <div className=\"font-extrabold text-2xl text-black text-center\">\n                        {movie.format || \"2D\"}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}